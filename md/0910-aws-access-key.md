# CSP와 AWS 권한 설정

이 글에서는 `HTTP Header CSP` 필드가 아닌 `Cloud Service Provider`에 대해 알아보고, `AWS IAM`과 `ACCESS KEY` 등 권한 설정에 대해 알아봅니다.

## CSP

> Cloud Service Provider

"대부분의 클라우드에서 보안 관련 서비스는 이름만 다르고 기능과 역할은 대동소이"합니다. 대부분의 `CSP`는 서로 비슷한 보안 기능을 이미 갖추고 있습니다.

그럼에도 "**한국의 법적, 사회적 특수한 상황**을 고려하여 **해외** `CSP` 혹은 **국내** `CSP`를 사용하거나 **별도의 내부 클라우드 및 데이터 센터**를 적재적소에 맞게 사용해야"한다고 합니다. 정부 규제를 생각하면 일리가 있습니다. (국가 안보/기밀과 관련된 사항을 해외 기업에 맡길 수는 없겠죠.)

- MSP (클라우드 도입 컨설팅, 운영, 기술 지원 업체)
- MSP가 보통 CSP에 대한 컨설팅을 진행한다고 합니다.
- 클라우드 네트워크 설계에 따라 비용이 천차만별이 될 수 있기 때문에 컨설팅(설계)/운영 감리/감독을 컨설팅한다고 합니다.

--- 

# AWS 해킹 실제 사례

- 2-Factor-Authentication(2차 인증)을 걸지 않고 `ROOT` 계정으로 사용하다가 해커가 대량의 ECS를 짧은 시간에 생성하여 과금 폭탄 발생
    - 1주일도 안되어 1000만원 요금 발생
    - 코인 채굴/좀비 PC 활용
- `AWS` 뿐만 아니라 `Vercel` 등 `AWS` 기반 `SaaS` 제품군에서도 심심찮게 발생하는 사례였습니다.


---

## AWS Secirity Service



이러한 

- IAM
    - IAM Access Analyzer
- ACM (AWS Certificate Manager)
- Security Hub
- GuardDuty

### IAM

권한 관리를 위해 사용되는 키입니다.
**중요 : 실습 시 Access Key를 공유하면 안됩니다! 유출 시 키/계정 삭제 필요합니다**

- 액세스 키 ID (Access Key ID): ID 역할을 하며, 인증 요청의 출처를 식별하는 정보입니다.
- 시크릿 액세스 키 (Secret Access Key): 비밀번호 역할을 하며, 본인임을 증명하는 비밀 정보입니다.

### 주요 특징 및 용도

- 프로그래밍 방식 접근: `AWS CLI`, `AWS API`, `AWS SDK` 등 AWS 앱, 스크립트에서 `AWS` 서비스에 접근하고 **리소스를 제어할 때 사용**됩니다.
- 장기 자격 증명: 웹 콘솔 로그인 시 사용하는 비밀번호와 달리, **액세스 키는 만료되지 않고 계속 사용할 수 있는 자격 증명**입니다.

### 보안 유의 사항

- 시크릿 액세스 키 유출 위험: 시크릿 액세스 키는 비밀번호와 같으므로 절대 외부에 노출되어서는 안 됩니다.
- 보안 침해 위험: 액세스 키가 유출되면 악의적인 사용자가 사용자의 권한으로 리소스를 생성, 삭제하거나 민감한 데이터를 탈취할 수 있으며, **예상치 못한 비용**이 발생할 수 있습니다.
- 보호 방법: 액세스 키는 AWS IAM 사용자를 통해 관리하며, 시크릿 액세스 키는 안전한 곳에 보관하고 절대 공유하지 않도록 주의해야 합니다.

### 액세스 키 유출 시 대처 방법

- 관련 리소스 삭제: 액세스 키가 사용된 모든 관련 리소스를 즉시 삭제합니다.
- CloudTrail 확인: AWS CloudTrail을 확인하여 어떤 활동이 발생했는지 분석합니다.
- 모든 액세스 키 교체: 모든 액세스 키를 삭제하고 새로운 액세스 키를 발급받아 교체합니다.
- 루트 비밀번호 변경: 보안을 위해 루트 사용자 계정의 비밀번호도 변경하는 것이 좋습니다.


